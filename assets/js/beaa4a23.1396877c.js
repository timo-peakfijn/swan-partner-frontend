"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[206],{4874:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>l,frontMatter:()=>r,metadata:()=>c,toc:()=>a});var i=t(4848),s=t(8453);const r={},o="OAuth2",c={id:"oauth2",title:"OAuth2",description:"Swan uses OAuth2 for authentication.",source:"@site/docs/oauth2.md",sourceDirName:".",slug:"/oauth2",permalink:"/swan-partner-frontend/oauth2",draft:!1,unlisted:!1,editUrl:"https://github.com/swan-io/swan-partner-frontend/edit/main/docs/docs/oauth2.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Lake (UI Kit)",permalink:"/swan-partner-frontend/lake-ui-kit"},next:{title:"User sessions",permalink:"/swan-partner-frontend/user-sessions"}},d={},a=[{value:"GET <code>/auth/login</code>",id:"get-authlogin",level:2},{value:"Generic query params",id:"generic-query-params",level:3},{value:"Specific params",id:"specific-params",level:3},{value:"GET <code>/auth/callback</code>",id:"get-authcallback",level:2},{value:"POST <code>/auth/logout</code>",id:"post-authlogout",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"oauth2",children:"OAuth2"}),"\n",(0,i.jsxs)(n.p,{children:["Swan uses ",(0,i.jsx)(n.a,{href:"https://oauth.net/2/",children:"OAuth2"})," for authentication.\nLearn more about ",(0,i.jsx)(n.a,{href:"https://docs.swan.io/api/authentication",children:"Swan and OAuth2"})," in our main docs."]}),"\n",(0,i.jsxs)(n.h2,{id:"get-authlogin",children:["GET ",(0,i.jsx)(n.code,{children:"/auth/login"})]}),"\n",(0,i.jsx)(n.p,{children:"This endpoint redirects to the Swan OAuth2 server and performs the correct flow based on given parameters."}),"\n",(0,i.jsx)(n.h3,{id:"generic-query-params",children:"Generic query params"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"scope"}),": additional OAuth2 scopes (always includes ",(0,i.jsx)(n.code,{children:"openid"})," and ",(0,i.jsx)(n.code,{children:"offline"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"identificationLevel"}),": ",(0,i.jsx)(n.a,{href:"https://docs.swan.io/concept/user#identification-level",children:"level of identification"})," for the user to verify their identity (",(0,i.jsx)(n.code,{children:"Expert"}),", ",(0,i.jsx)(n.code,{children:"PVID"}),", or ",(0,i.jsx)(n.code,{children:"QES"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"specific-params",children:"Specific params"}),"\n",(0,i.jsxs)(n.p,{children:["For some specific flows, the server needs to perform an action after the user is authentified.\nThe server will encode the information in the OAuth2 flow's ",(0,i.jsx)(n.code,{children:"state"}),"."]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Flow"}),(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Login and redirection"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"redirectTo"})}),(0,i.jsxs)(n.td,{children:["absolute path (such as ",(0,i.jsx)(n.code,{children:"/path/to/x"}),") where the user will be redirected after the authentication flow"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Onboarding finalization"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"onboardingId"})}),(0,i.jsx)(n.td,{children:"ID for the onboarding the user is finalizing"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Account membership invitation"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"accountMembershipId"})}),(0,i.jsx)(n.td,{children:"ID for the account membership to which you're binding the user"})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"caution",children:(0,i.jsxs)(n.p,{children:["You must use the ",(0,i.jsx)(n.strong,{children:"Banking URL"})," (",(0,i.jsx)(n.code,{children:"${CLIENT_BANKING_URL}/auth/login?..."}),") to generate onboarding links. This ensures the session cookie is written on the correct domain, avoiding an unnecessary login flow."]})}),"\n",(0,i.jsxs)(n.h2,{id:"get-authcallback",children:["GET ",(0,i.jsx)(n.code,{children:"/auth/callback"})]}),"\n",(0,i.jsxs)(n.p,{children:["This endpoint is where Swan's OAuth2 server redirects to, permorming the necessary actions based on the received ",(0,i.jsx)(n.code,{children:"state"}),"."]}),"\n",(0,i.jsxs)(n.h2,{id:"post-authlogout",children:["POST ",(0,i.jsx)(n.code,{children:"/auth/logout"})]}),"\n",(0,i.jsx)(n.p,{children:"This endpoint clears the user session."})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>c});var i=t(6540);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);